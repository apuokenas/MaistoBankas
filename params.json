{"name":"Maisto bankas","tagline":"Maisto produktų apskaitos programėlė","body":"Maisto bankas\r\n=============\r\n\r\n[![Gitter](https://badges.gitter.im/Join%20Chat.svg)](https://gitter.im/apuokenas/MaistoBankas?utm_source=badge&utm_medium=badge&utm_campaign=pr-badge&utm_content=badge)\r\n\r\n`PI;N` (angl. `TL;DR`)\r\n\r\nMaisto produktų apskaitos programėlė \"Maisto bankas\": subalansuota \"Maisto banko\" savanoriams, bet tinka ir \"Maltiečių ordino\" virtuvių šefams bei kebabinių gaspadinėms!\r\n\r\nProgramėlė \"Maisto bankas\" yra licencijuota pagal [\"Apache License\"](http://choosealicense.com/licenses/apache-2.0) sąlygas, vadinasi, programinę įrangą galima laisvai:\r\n* Naudoti bet kokiu tikslu.\r\n* Modifikuoti.\r\n* Platinti (tiek originalią, tiek modifikuotą versijas).\r\nVienintelė ribojanti sąlyga - privaloma išsaugoti autorines teises ir atsišaukimą (jei toks yra) bei nereikalauti jokių autorinių honorarų.\r\n\r\n### Projekto techniniai niuansai\r\n\r\nŠiame dokumente galite susipažinti, kaip vyksta programėlės tobulinimas, apauginant ją nauju funkcionalumu ir koreguojant ar atsisakant senesnio, nebeatitinkančio vartotojų poreikių (arba bankrutavus kokiam nors API teikėjui).\r\n\r\nIdėjų semtasi iš kyborgų korifėjaus Viliaus Kraujučio 2014 m. vasarį \"Vinted\" patalpose vestų [\"Android\" mokymų](https://plus.google.com/u/0/events/c24nklguv5saguo9sj29mpbuo7g) mokymų, kurių metu buvo šnekučiuojamasi programuotojams skirtoje tarnyboje [\"Gitter\"](https://gitter.im).\r\n\r\n### Programavimo aplinkos įdiegimas\r\n\r\nJei norite prisidėti, tobulinant aplikaciją, turite lokaliai įsidiegti:\r\n\r\n* Naujausią oficialią integruotą \"Android\" programavimo aplinką [\"Android Studio\"](http://developer.android.com/sdk/index.html).\r\n* Projekto *buildinimo* automatizavimo įrankį [\"Gradle\" (v2.2.1)](http://services.gradle.org/distributions/gradle-2.2.1-all.zip).\r\n* Programavimui \"Java\" kalba skirtą priemonę [\"Java SE Development Kit 8\"](http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html).\r\n\r\n### \"Android\" programėlės generavimas\r\n\r\nPasinaudojus \"Android Studio\" vedliu, iš \"GitHub\" kodo versijavimo sistemos galima parsiųsti programėlės struktūrą:\r\n\r\nVCS --> Checkout from Version Control... --> GitHub.\r\n\r\nAtsidariusiame lange į \"Vcs Version URL\" laukelį įveskite:\r\n`https://github.com/apuokenas/MaistoBankas.git`,\r\no kaip \"Parent Directory\" nurodykite vietinį aplanką, kuriame talpinsite projekto failus.\r\n\r\nP. S. Savo mašinoje reikia turėti git.exe bylą, kurios adresas įvedamas per \"Settings\" meniu:\r\n\r\nFile --> Settings --> Version Control --> Git.\r\n\r\nLauke \"Path to Git executable\" nurodomas kelias iki minėto failo. Pvz., jei esate \"Windows\" vartotojas:\r\n\r\nC:\\Users\\[Vartotojas]\\AppData\\Local\\GitHub\\PortableGit_[40_raidžių_ir_skaičių]\\bin\\git.exe.\r\n\r\nKodo modifikacijas ir susijusius komentarus galite peržiūrėti \"GitHub\" [pakeitimų įrašuose](https://github.com/apuokenas/MaistoBankas/commits).\r\n\r\n### `Layout` komponentai pagrindiniame `fragment`'e\r\n\r\n* Mygtukas \"Nustatymai\", atidarantis produktų rinkimo (parduotuvės) arba valgių gaminimo vietos informacijos suvedimo `fragment`'ą.\r\n* Mygtukas \"Skenuoti\".\r\n* Sąrašas (`ListView`) nuskenuotų prekių išvedimui į ekraną.\r\n\r\n## \"Nustatymų\" `fragment`'o pridėjimas\r\n\r\nTai paprasta forma, kurioje randami keli įvesties laukeliai:\r\n\r\n* Miestas\r\n* Adresas\r\n* Parduotuvės pavadinimas\r\n* Savanorio vardas\r\n\r\nIr, žinoma, *mygelis* \"Išsaugoti\".\r\n\r\n## Brūkšninio kodo skenerio implementavimas\r\n\r\nBrūkšninius kodus skenuoja kita į \"Knygų Kalėdas\" integruota programėlė - [\"ZXing\"](https://github.com/zxing/zxing) (dar žinoma kaip \"Zebra Crossing\").\r\nSkenavimas vykdomas, naudojantis `Intent`'u.\r\nInstrukcijas, kaip visa tai integruoti, galite rasti [čia](https://github.com/zxing/zxing/wiki/Scanning-Via-Intent).\r\n\r\n## `Activity` gyvavimo ciklo registravimas\r\n\r\nSiekdamas geriau suprasti `Activity` ir `Fragment` gyvavimo ciklus (angl. *lifecycle*), peržiūrėjau atitinkamą [diagramą](http://developer.android.com/training/basics/activity-lifecycle/starting.html), kuria remiantis, įdėjau `Log.d()` komandas į `BaseActivity` šiuose metoduose:\r\n* OnCreate()\r\n* OnStart()\r\n* OnResume()\r\n* OnPause()\r\n* OnStop()\r\n* OnDestroy()\r\n\r\n## `Fragment`'ų gyvavimo ciklo registravimas\r\n\r\nnalogiškai `Activity` gyvavimo ciklo *loginimo* atvejui, pasidariau `Fragment` gyvavimo ciklo registravimą.\r\nApie `Fragment` gyvavimo ciklus galima pasiskaityti [oficialioje \"Google\" dokumentacijoje](http://developer.android.com/guide/components/fragments.html)\r\n\r\nTaigi reikia susikurti `BaseFragment` pagrindinę klasę, kurioje patalpinti *loginimo* metodai:\r\n* onAttach()\r\n* onCreate()\r\n* onCreateView()\r\n* onActivityCreated()\r\n* onStart()\r\n* onResume()\r\n* onPause()\r\n* onStop()\r\n* onDestroyView()\r\n* onDestroy()\r\n* onDetach()\r\n\r\n## Duomenų bazės, skirtos saugoti brūkšninius kodus, integravimas\r\n\r\nFunkcionalumas įgyvendintas, pasitelkus [\"ORM Lite\"](http://ormlite.com/sqlite_java_android_orm.shtml).\r\n\r\n### Duomenų modelio kūrimas\r\n\r\n## Saugotina informacija\r\n\r\nPrekė `Item`:\r\n\r\n* `barcode` - prekės brūkšninis kodas\r\n* `name` - prekės pavadinimas\r\n* `price` - prekės kaina\r\n* `weight` - prekės svoris (bnors fizikiškai tiksliau būtų vadint mase)\r\n* `image_url` - prekės nuotrauka\r\n\r\nNuskenuota prekė `ScannedItem`:\r\n\r\n* `id` - unikalus konkretų skenavimą identifikuojantis numeris\r\n* `barcode` - prekės brūkšninis kodas\r\n* `time` - skenavimo laikas\r\n* `place` - skenavimo vieta\r\n* `volunteer` - savanoris (taip pat gali būti virtuvės šefas ar namų šeimininkė, priklausomai nuo aplinkybių, kuriomis naudojama aplikacija)\r\n\r\n### Naujai skenuojamų produktų išsaugojimas duomenų bazėje\r\n\r\nSukuriamas ir duomenų bazėn patalpinamas naujas `ScannedItem` objektas.\r\n\r\nApie tai, kaip susikurti \"ORM Lite\" duomenų bazės `Helper` klasę, galima sužinoti iš šių šaltinių:\r\n* [ORM naudojimas kartu su \"Android\" operacine sistema](http://ormlite.com/javadoc/ormlite-core/doc-files/ormlite_4.html#Use-With-Android)\r\n* [ORM taikymo \"Android'e\" pavyzdžiai](http://ormlite.com/android/examples)\r\n* [Konkretus taikomasis pavyzdys \"GitHub'e\"](https://github.com/j256/ormlite-examples/blob/master/android/HelloAndroid/src/com/example/helloandroid/DatabaseHelper.java)\r\n\r\nPasinaudojant `Helper` klase, įrašas išsaugomas duomenų bazėje.\r\n\r\n### Irašų, išsaugotų duomenų bazėje, rodymas\r\n\r\n## Atvaizduojamas nuskenuotų prekių sąrašas vis atnaujinamas naujais įrašais iš duomenų bazės\r\n\r\n* `MainFragment`'e `onResume` metode iškviečiama `dbHelper.getScannedItemDao().queryForAll()` funkcija.\r\n* Sąrašas bus atvaizduotas, sukūrus naują adapterį.\r\n* Sąrašo eilutės vaizduojamos sukurtame `layout`'e (kol kas - tik su `TextView`, skirtu ekranan išvesti brūkšninį kodą).\r\n\r\n## Nuskenuotos prekės informacijos rodymas\r\n\r\n* Duomenys apie maisto produktą gaunami ir atitinkamas duomenų modelis sukuriamas, naudojant REST klientą [\"Retrofit\"](http://square.github.io/retrofit).\r\n* Prekės informacijos talpinimas duomenų bazėje.\r\n* Prekės informacijos pavaizdavimas sąraše.\r\n* Prekės paveiksliukas rodomas, pasitelkus paveikslėlių siuntimo ir kešavimo (talpinimo į podėlį) biblioteką [\"Picasso\"](http://square.github.io/picasso).\r\n* Rodoma papildoma prekės informacija.\r\n* `Nustatymai` mygtukas įtrauktas į meniu.\r\n* `Skenuoti` mygtukas centruojamas apačioje.\r\n* Naujausi nuskenuoti įrašai rodomi viršuje.\r\n* Kai kur naudojama animacija.\r\n\r\nNe pagal \"Material Design\" principus sukurtos vartotojo sąsajos pavyzdys:\r\n![2014-03-29 14 37 12](https://cloud.githubusercontent.com/assets/1859636/2558559/b9318ae4-b74f-11e3-8705-30dfbd4ab074.png)\r\n","google":"UA-46110910-3","note":"Don't delete this file! It's used internally to help with page regeneration."}